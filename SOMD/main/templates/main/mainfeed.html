{% extends 'base.html' %}
{% load static %}

{% block content %}
<link rel="stylesheet" type="text/css" href="{% static 'css/post.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'css/mainfeed.css' %}">
<section class="header">

    <section class="mainTitle">
        <!-- <i class="fa-solid fa-house"></i> -->
        <div>{{ somd.name }}</div>
        <div class="button_case">
            <a class="button">가입하기</a>
            <a class="button">관리하기</a>
            <a class="button">수정하기</a>
        </div>
    </section>
</section>
<section class="EmptyForHeader"></section>

<section class="somdPage">
    <a class="writeButton" href="{% url 'main:new' somd.id%}"><i class="fa-solid fa-pen"></i></a>
    <section class="mainfeed">
        
        <section class="feed_header">
            {% if somd.backgroundimage %}
            <div class="background image" 
                style="background-image:url({{somd.backgroundimage.url}});">
            {% else %}
            <div class="background image">
            {% endif %}
                <a class="bookmark"><i class="fa-regular fa-star"></i></a>
                <div class="info">
                    <div>#{{ somd.category }}</div>
                    <div>{{ somd.department }}</div>
                </div>
            </div>

            <div class="profile">
            {% if somd.profileimage %}
            <div class="image" 
                style="background-image:url({{somd.profileimage.url}});"></div>
            {% else %}
            <div class="basic somd image">somd</div>
            {% endif %}
            </div>

            <div class="info">
                <div class="name">{{ somd.name }}</div>
                <div>{{ somd.intro }}</div>
                <!-- <div>{{ somd.admin.username }}</div> -->
            </div>
            

        </section>

        <section class="option">
            <form class="search">
                <i class="fa-solid fa-magnifying-glass"></i>
                <input type="text">
            </form>

            <form class="view">
                <select name="view_option" id="lang">
                    <option value="feed">피드형</option>
                    <option value="list">리스트형</option>
                </select>
            </form>
        </section>
        
        <section class="postContainer">
            <div class="list">
                {% if posts %}
                {% for post in posts %}
                <a class="post_box album_post" href="{% url 'main:viewpost' post.id %}">
                    <section class="post_header">
                        <div class="profile">
                            <div class="image" style="background-image:url({{ post.writer.profile.profile_pic.url }});"></div>
                            <div class="name">{{ post.writer.profile.nickname }}</div>
                        </div>
                        <div class="icon">
                            <i class="fa-solid fa-thumbtack"></i>
                            <i class="fa-solid fa-ellipsis-vertical"></i>
                        </div>
                    </section>
                    <div class="about_post">

                        {% if post.images.all %}
                            
                            <div class="image" style="background-image:url( {{ post.images.first.image.url }} );">
                            {% if post.images.all|length > 1 %}
                                <div class="image_more">
                                    <i class="fa-solid fa-plus"></i>
                                </div>
                            {% endif %}
                            </div>
                        {% endif %}
                        <div class="text">
                            <div class="title">{{ post.title }}</div>
                            <div class="body">{{ post.summary }}</div>
                        </div>
                    </div>
                    <section class="post_footer">
                        <div class="icon">
                            <div class="like">
                                <i class="fa-solid fa-heart"></i>
                                <div>10</div>
                            </div>
                            <div class="comment">
                                <i class="fa-regular fa-message"></i>
                                <div>10</div>
                            </div>
                        </div>

                        <div class="scrap">
                            <i class="fa-regular fa-bookmark"></i>
                        </div>

                    </section>
                </a>
                {% endfor %}
                {% else %}
                <section class="warning">아직 포스트가 없습니다!</section>
                {% endif %}
        </section>
    
    </section> 

</section>


<script>
    {% for post in posts %}
    console.log("{{ post.images. }}");
    {% endfor %}
</script>

{% endblock %}

